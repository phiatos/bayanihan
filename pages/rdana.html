<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="../components/sidebar.css" />
  <link rel="stylesheet" href="../css/rdana.css" />
  <link rel="stylesheet" href="../css/global.css" />
  <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"/>

  <!-- Firebase Compat SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  
  <title>RDANA Page</title>
</head>
<body>
  <div class="form-page-container">
    <div class="sidebar-placeholder"></div>
    <div id="form-main-content">
      <header>Rapid Damage Assessment and Need Analysis Page</header>

      <!-- Page 1 -->
      <form id="form-page-1">
        <div class="form first">
          <div class="form-container-1">
            <span class="title">Profile of the Disaster</span>
            <div class="fields">
              <div class="input-field">
                <label>Site Location/Address (Barangay)</label>
                <input type="text" id="affectedBarangayInput" maxlength="50" placeholder="Enter Affected Barangay" required/>
              </div>
              <div class="input-field">
                <label>Site Location/Address (City/Municipality)</label>
                <input type="text" placeholder="Enter Affected City/Municipality" maxlength="50" required/>
              </div>
              <div class="input-field">
                <label>Site Location/Address (Province)</label>
                <input type="text" placeholder="Enter Affected Province" maxlength="50" required/>
              </div>
              <div class="input-field">
                <label>Local Authorities/Persons Contacted for Information</label>
                <input type="text" placeholder="Enter Name" maxlength="50" required/>
              </div>
              <div class="input-field">
                <label>Date of Information Gathered</label>
                <input type="date" id="infoGatheredDate" name="dateInput" maxlength="60" required/>
              </div>
              <div class="input-field">
                <label>Time of Information Gathered</label>
                <input type="time" id="infoGatheredTime" name="timeInput" required/>
              </div>
              <div class="input-field">
                <label>Name of the Organization's Involved</label>
                <input type="text" placeholder="Enter Organization Name" required/>
              </div>
            </div>
          </div>

          <div class="form-container-2">
            <span class="title">Modality</span>
            <div class="fields">
              <div class="input-field">
                <label>Locations and Areas Affected (Barangay)</label>
                <input type="text" id="affectedBarangayInput" placeholder="Enter Affected Barangay" maxlength="50" required/>
              </div>
              <div class="input-field">
                <label>Locations and Areas Affected (City/Municipality)</label>
                <input type="text" placeholder="Enter Affected City/Municipality" maxlength="50" required/>
              </div>
              <div class="input-field">
                <label>Locations and Areas Affected (Province)</label>
                <input type="text" placeholder="Enter Affected Province" maxlength="50" required/>
              </div>
              <div class="input-field">
                <label>Type of Disaster</label>
                <select required>
                  <option value="" disabled selected>Type of Disaster</option>
                  <option value="Flood">Flood</option>
                  <option value="Earthquake">Earthquake</option>
                  <option value="Typhoon">Typhoon</option>
                  <option value="Landslide">Landslide</option>
                  <option value="Fire">Fire</option>
                  <option value="Volcanic Eruption">Volcanic Eruption</option>
                  <option value="Pandemic">Pandemic</option>
                  <option value="Others">Others</option>
                </select>
              </div>
              <div class="input-field">
                <label>Date of Occurrence</label>
                <input type="date" id="occurrenceDate" placeholder="MM/DD/YY" required/>
              </div>
              <div class="input-field">
                <label>Time of Occurrence</label>
                <input type="time" id="occurrenceTime" placeholder="Enter Time" required/>
              </div>
            </div>

            <button type="button" class="next-btn" id="nextBtn1">Proceed</button>
          </div>
        </div>
      </form>

      <!-- Page 2 -->
      <form id="form-page-2" style="display: none;">
        <div class="form-container-1">
          <span class="title">Summary of Disaster/Incident (optional):</span>
          <textarea rows="6" cols="100" placeholder="Enter Summary"></textarea>

         
          <div style="overflow-x: auto; margin-top: 10px;">
            <span class="title required">Initial Effects</span>
            <div class="table-container">
            <table id="disasterprofile-table">
              <thead>
                <tr>
                  <th>Affected Municipalities/Communities</th>
                  <th>Total Population</th>
                  <th>Affected Population</th>
                  <th>Deaths</th>
                  <th>Injured</th>
                  <th>Missing</th>
                  <th>Children</th>
                  <th>Women</th>
                  <th>Senior Citizens</th>
                  <th>PWD</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="tableBody">
                <tr>
                <td><input type="text" placeholder="Enter Municipalities/Communities" required maxlength="50"/></td>
                <td><input type="number" placeholder="Enter Total Population" min="0" required oninput="if(this.value < 0) this.value = 0;"/></td>
                <td><input type="number" placeholder="Enter Affected Population" min="0" required oninput="if(this.value < 0) this.value = 0;"/></td>
                <td><input type="number" placeholder="No. of Deaths" min="0" required oninput="if(this.value < 0) this.value = 0;"/></td>
                <td><input type="number" placeholder="No. of Injured" min="0" required oninput="if(this.value < 0) this.value = 0;"/></td>
                <td><input type="number" placeholder="No. of Missing" min="0" required oninput="if(this.value < 0) this.value = 0;"/></td>
                <td><input type="number" placeholder="No. of Children" min="0" required oninput="if(this.value < 0) this.value = 0;"/></td>
                <td><input type="number" placeholder="No. of Women" min="0" required oninput="if(this.value < 0) this.value = 0;"/></td>
                <td><input type="number" placeholder="No. of Senior Citizens" min="0" required oninput="if(this.value < 0) this.value = 0;"/></td>
                <td><input type="number" placeholder="No. of PWD" min="0" required oninput="if(this.value < 0) this.value = 0;"/></td>

                  <td><button type="reset" class="removeRowBtn">Clear</button></td>
                </tr>
              </tbody>
            </table>
          </div>
          </div>
          <button type="button" class="bayanihanBtn" id="addRowBtn" style="margin-top: 10px;">Add Row</button>
        </div>
        
        <div class="button-group">
          <button type="button" class="next-btn" id="backBtn2">Back</button>
          <button type="button" class="next-btn" id="nextBtn2">Proceed</button>
        </div>
      </form>

      <!-- Page 3 -->
      <form id="form-page-3" style="display: none;">
        <div class="form-container-1">
          <span class="title">Status of Lifelines, Social Structure, and Critical Facilities (optional)</span>
          <div style="overflow-x: auto; margin-top: 10px;">
            <table id="status-table">
              <thead>
                <tr>
                  <th style="width: 40%;">Structures</th>
                  <th style="width: 60%;">Status</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td id="status-td">Residential Houses</td>
                  <td>
                    <select>
                      <option value="" disabled selected>Select from one of the following</option>
                      <option value="Option1">Some houses are flooded/damaged.</option>
                      <option value="Option2">Many houses are flooded/damaged.</option>
                      <option value="Option3">An entire community is flooded/damaged.</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td id="status-td">Transportation and Mobility</td>
                  <td>
                     <select>
                      <option value="" disabled selected>Select from one of the following</option>
                      <option value="Option1">Roads are clear of debris and/or flood; passable.</option>
                      <option value="Option2">Some roads are blocked by debris and/or flood.</option>
                      <option value="Option3">Most roads are blocked by debris and/or flood; not passable.</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td id="status-td">Electricity, Power Grid</td>
                  <td>
                    <select>
                      <option value="" disabled selected>Select from one of the following</option>
                      <option value="Option1">There is electricity.</option>
                      <option value="Option2">Some places do not have electricity.</option>
                      <option value="Option3">The entire area has no electricity.</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td id="status-td">Communication Networks, Internet</td>
                  <td>
                    <select>
                      <option value="" disabled selected>Select from one of the following</option>
                      <option value="Option1">Communication lines are up.</option>
                      <option value="Option2">There is intermittent signal available.</option>
                      <option value="Option3">Communication lines are down.</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td id="status-td">Hospitals, Rural Health Units</td>
                  <td>
                    <select>
                      <option value="" disabled selected>Select from one of the following</option>
                      <option value="Option1">Hospitals are open.</option>
                      <option value="Option2">Some hospitals are open.</option>
                      <option value="Option3">No hospitals are open.</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td id="status-td">Water Supply System</td>
                  <td>
                    <select>
                      <option value="" disabled selected>Select from one of the following</option>
                      <option value="Option1">Clean water is available.</option>
                      <option value="Option2">Only some locations have clean water.</option>
                      <option value="Option3">No clean water is available.</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td id="status-td">Market, Business, and Commercial Establishments</td>
                  <td>
                    <select>
                      <option value="" disabled selected>Select from one of the following</option>
                      <option value="Option1">Establishments are open.</option>
                      <option value="Option2">Some establishments are open.</option>
                      <option value="Option3">No establishments are open.</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <td id="status-td">Others</td>
                  <td>
                    <input type="text" id="OthersInput" placeholder="Input Here (Optional)" maxlength="50"/>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="button-group">
          <button type="button" class="next-btn" id="backBtn3">Back</button>
          <button type="button" class="next-btn" id="nextBtn3">Proceed</button>
        </div>
      </form>

      <!-- Page 4 -->
      <form id="form-page-4" style="display: none;">
        <div class="form first">
          <div class="form-container-1">
            <span class="title">Initial Needs Assessment Checklist (optional)</span>
            <div style="overflow-x: auto; margin-top: 10px;">
              <table id="checklist-table">
                <tbody>
                  <tr>
                    <td style="padding: 8px;">Relief Packs</td>
                    <td style="text-align: center;">
                      <input type="checkbox" name="reliefPacks" id="reliefPacks">
                    </td>
                  </tr>
                  <tr>
                    <td style="padding: 8px;">Hot Meals</td>
                    <td style="text-align: center;">
                      <input type="checkbox" name="hotMeals" id="hotMeals">
                    </td>
                  </tr>
                  <tr>
                    <td style="padding: 8px;">Hygiene Kits</td>
                    <td style="text-align: center;">
                      <input type="checkbox" name="hygieneKits" id="hygieneKits">
                    </td>
                  </tr>
                  <tr>
                    <td style="padding: 8px;">Drinking Water</td>
                    <td style="text-align: center;">
                      <input type="checkbox" name="drinkingWater" id="drinkingWater">
                    </td>
                  </tr>
                  <tr>
                    <td style="padding: 8px;">Rice Packs</td>
                    <td style="text-align: center;">
                      <input type="checkbox" name="ricePacks" id="ricePacks">
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div class="fields">
              <div class="input-field">
                <label>Other Immediate Needs:</label>
                <input type="text" placeholder="Enter items" maxlength="50"/>
              </div>
              <div class="input-field">
                <label>Estimated Quantity:</label>
                <input type="number" placeholder="Estimated No. of Families to Benefit" />
              </div>
            </div>
          </div>

          <div class="form-container-2">
            <span class="title">Initial Response Actions</span>
            <div class="fields">
              <div class="input-field">
                <label>Response Groups Involved:</label>
                <input type="text" placeholder="Enter Name of Organization/s" maxlength="50" required/>
              </div>
              <div class="input-field">
                <label>Relief Assistance Deployed:</label>
                <input type="text" placeholder="Enter Relief Assistance" maxlength="50" required/>
              </div>
              <div class="input-field">
                <label>Number of Families Served:</label>
                <input type="number" placeholder="Enter number of families" required/>
              </div>
            </div>

            <div class="button-group">
              <button type="button" class="next-btn" id="backBtn4">Back</button>
              <button type="button" class="next-btn" id="nextBtn4">Proceed</button>
            </div>
          </div>
        </div>
      </form>

      <!-- Page 5 - Submission Preview -->
      <form id="form-page-5" style="display: none;">
        <div class="form-container-1">
          <div id="preview-data"></div> <!-- This is where the preview will be injected -->
          
          <div class="button-group">
            <button type="button" class="next-btn" id="backBtn5">Back</button>
            <button type="submit" class="next-btn" id="submitReportBtn">Submit Report</button>
          </div>
        </div>
      </form>

    </div>
  </div>

  <!-- Load sidebar and JS -->
  <script>
    fetch('../components/sidebar.html')
      .then(response => response.text())
      .then(data => {
        document.querySelector('.sidebar-placeholder').innerHTML = data;
        const sidebarScript = document.createElement('script');
        sidebarScript.src = '../components/sidebar.js';
        document.querySelector('.sidebar-placeholder').appendChild(sidebarScript);
      })
      .catch(error => console.error('Error loading sidebar:', error));
  </script>

  <script src="../js/inactivity-detector.js"></script> 
  <script type="module" src="../js/rdana.js"></script>
</body>
</html>